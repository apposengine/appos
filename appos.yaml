# AppOS Platform Configuration
# Loaded by: appos/engine/config.py â†’ load_platform_config()

platform:
  name: "AppOS"
  version: "1.0.0"
  environment: "dev"


database:
  host: "localhost"
  port: 5432
  name: "postgres"
  user: "postgres"
  password: "admin"
  db_schema: "appOS"
  pool_size: 10
  max_overflow: 20
  pool_timeout: 30
  pool_recycle: 1800
  pool_pre_ping: true


redis:
  url: "redis://localhost:6379"
  # Logical DBs:
  #   0 = Celery broker
  #   1 = Celery results
  #   2 = Permission cache (TTL 5 min)
  #   3 = Object cache (TTL 10 min)
  #   4 = Session store
  #   5 = Rate limiting


celery:
  broker_url: "redis://localhost:6379/0"
  result_backend: "redis://localhost:6379/1"
  task_default_queue: "appos_tasks"
  task_time_limit: 600
  task_soft_time_limit: 540


security:
  session_timeout: 3600           # 1 hour
  idle_timeout: 1800              # 30 minutes
  max_concurrent_sessions: 5
  max_login_attempts: 5
  password_min_length: 8
  csrf_enabled: true
  credential_encryption_key: ""   # Auto-generated on appos init if empty


logging:
  level: "INFO"
  format: "json"
  directory: ".appos/logs"
  rotation:
    strategy: "daily"
    max_file_size_mb: 100
    compress_after_days: 7
  retention:
    execution_days: 90
    performance_days: 30
    security_days: 365
  cleanup_schedule: "0 2 * * *"
  async_queue:
    flush_interval_ms: 100
    flush_batch_size: 50
    max_queue_size: 10000


apps:
  - taskm
